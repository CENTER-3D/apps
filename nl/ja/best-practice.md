---

copyright:
  years: 2017, 2018
lastupdated: "2018-01-18"

---

# 良いアプリを作成するには

{{site.data.keyword.Bluemix_notm}} でのアプリの作成は、他の方法で作成するアプリとは異なる可能性があります。クラウド・プラットフォーム用の最良のアプリを作成するために、以下のベスト・プラクティスが役立ちます。

## マルチリージョン・アーキテクチャー
{: #multiregion}

単一の地域でのダウン時間を避けるために複数インスタンスの実行が推奨されていますが、より堅固なアプリケーションを提供するにはマルチリージョン・アーキテクチャーを検討してください。

## モニタリング・オプション
{: #monitoring}

{{site.data.keyword.Bluemix_notm}} は、[Monitoring and Analytics](/docs/services/monana/index.html) および [New Relic ![外部リンク・アイコン](../icons/launch-glyph.svg)](http://newrelic.com/){: new_window} などのサービスを使用してアプリケーションのモニタリングを容易にします。詳しくは、『[モニターとロギング](../monitor_log/monitoringandlogging.html#monitoring_logging_bluemix_apps)』を確認してください。

## サポート・オプション
{: #support}

{{site.data.keyword.Bluemix_notm}} の有料プランでは、*オプションの* 有料サポートを含むさまざまなアカウント・タイプが提供されています。ご使用のアカウント・タイプに関係なく、{{site.data.keyword.Bluemix_notm}} でのアプリケーションの実稼働を予定している場合は、このオプションの登録を検討してください。

有料サポートを契約しているかどうかに関係なく、[サポート](../get-support/howtogetsupport.html)に記載されている支援を受けることができます。サポートは予期しない問題に対する備えを提供します。

## クラウド対応アプリの開発
{: #cloud-ready-apps}

以下のすべての基本原則がアプリ内で守られている場合、そのアプリはクラウド対応であり、{{site.data.keyword.Bluemix_notm}} にマイグレーションできます。 アプリで基本原則の違反がある場合、通常は基本原則に従うようにアプリを変更できます。
{:shortdesc}

### アプリを、直接特定のトポロジー用にコーディングしないでください。

非クラウド環境では、アプリは特定のデプロイメント・トポロジーを使用する場合があります。 しかし、クラウド対応のアプリおよびサービスは即時のスケーラビリティーの変更を許容するため、アプリ・トポロジーはクラウド・アプリでは変わる可能性があります。 スケーラビリティーの変更には、動的なスケーリングと、手動でのアプリのインスタンス数の変更があります。

スケーラビリティー変更によってアプリが影響を受けないように、アプリをできるだけ汎用的かつステートレスになるようビルドしてください。

### ローカル・ファイル・システムが永続することを前提としないでください。

アプリ・インスタンスはクラウド上でいつでも移動、削除、複製される可能性があるため、ファイル・システムに書き込まれたファイルに依存しないようにしてください。 頻繁に使用される情報 (アプリ・ログなど) のキャッシュとしてアプリがローカル・ファイル・システムを使用する場合、その情報は、インスタンスがシャットダウンされ、別の場所または別の VM で再始動されると失われます。

ローカル・ファイル・システムの代わりに、SQL または NoSQL データベースなどのサービスに情報を保管できます。 動的クラウド環境では、ログが生成されるアプリ・インスタンスよりも長く存続するサービスでログを使用可能にしておくことも重要です。

### アプリ内にセッション状態を保管しないでください。

システムの状態は、実行中の個々のアプリ・インスタンスではなく、データベースおよび共有ストレージによって定義されます。 ステートフルであるという性質はどのような種類であっても、アプリのスケーラビリティーを制限します。 サーバー上の集中管理される場所にセッション状態を保管することによって、セッション状態の影響を最小化するようにしてください。

セッション状態を完全に除去できない場合は、アプリ・サーバーの外部にある可用性の高い保管場所にセッション状態を格納してください。 その保管場所としては、IBM WebSphere Extreme Scale、Redis、Memcached、外部データベースなどがあります。

### 特定のインフラストラクチャー依存関係を使用しないでください。

これは 1 つの一般原則ですが、いくつかの現れ方があります。 例えば、アプリが使用するサービスに特定のホスト名または IP アドレスが割り振られていると想定しないでください。 それらのサービスはクラウド環境では再配置されたり再生成されたりする可能性があり、ホスト名および IP アドレスも変わる可能性があります。

環境特有の依存関係を一連のプロパティー・ファイルに抽出することは改善ではありますが、まだ不十分です。 ベスト・プラクティスは、外部サービス・レジストリーを使用してサービス・エンドポイントを解決することか、または、ルーティング機能全体を仮想名を持つ 1 つのサービス・バスまたはロード・バランサーに委任することです。

### アプリ内でインフラストラクチャー API を使用しないでください。

インフラストラクチャー API はソフトウェア・スタック内の多くのさまざまなレイヤーを参照することがあるため、アプリ内で特定のインフラストラクチャー API に依存している場合、そのインフラストラクチャーの変更がより難しいものになります。

代わりに、既存のオープン・ソース製品または市販製品に依存し、PaaS ソリューションは PaaS レイヤーに残したままにしてアプリ・コードの外に保持するようにできます。

### あいまいなプロトコルを使用しないでください。

回復力のために余分な構成を必要とするようなあいまいなプロトコルを使用しないでください。

標準プロトコルに基づくアプリのほうが、構成項目をプラットフォームに委任でき、より回復力があります。 標準プロトコルには、HTTP、SSL、標準データベース、キューイング、Web サービス接続などがあります。

### OS 固有の機能に依存しないでください。

既に OS 固有の機能を使用している場合は、例えば Cygwin および Monoなどの互換ライブラリーを使用して、この問題を修正できます。 Cygwin は、Windows 環境で Linux ツールのセットを提供する互換ライブラリーです。 Mono は、Linux で Windows .NET 機能を提供する互換ライブラリーです。

OS 固有の依存関係を避けて、代わりにミドルウェア・インフラストラクチャーまたはサービス・プロバイダーによって提供されるサービスを使用してください。

### アプリを手動でインストールしないでください。

動的クラウド環境では、アプリがオンデマンドで頻繁にインストールされる可能性があります。 インストール・プロセスはスクリプト化されて信頼できるものでなければならず、構成データはスクリプトの外部に置く必要があります。

アプリのインストール済み環境は、オペレーティング・システムから独立した、一様なスクリプトの一式と捉えてください。さまざまな自動化技法に適応できるよう、アプリのインストールを小さくポータブルなものにしてください。 また、アプリのインストールに必要な依存関係を最小限にしてください。

クラウド対応のアプリについて詳しくは、[The 12-factor app ![「外部リンク」アイコン](../icons/launch-glyph.svg)](http://12factor.net/){: new_window} を参照してください。

