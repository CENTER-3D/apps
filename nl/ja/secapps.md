---

copyright:
  years: 2015, 2019
lastupdated: "2019-01-15"

---

{:shortdesc: .shortdesc}
{:tip: .tip}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:screen: .screen}
{:note: .note}

# 証明書署名要求の作成
{: #ssl_csr}

SSL 証明書を作成してアップロードし、アプリケーションへのアクセスを制限することにより、アプリケーションを保護できます。
{:shortdesc}

{{site.data.keyword.cloud}} で許可された SSL 証明書をアップロードするには、その前にご使用のサーバーで証明書署名要求 (CSR) を作成しなければなりません。 CSR というのは、公開鍵と関連情報への署名を要求するために認証局に送信されるメッセージのことです。 通常、CSR は PKCS #10 フォーマットになっています。 CSR には、公開鍵と、共通名、組織、市区町村、都道府県、国、および E メールが組み込まれています。 SSL 証明書要求は、2048 ビット長の CSR 鍵を使用した場合のみ受理されます。

## CSR の作成

CSR の作成方法は、ご使用のオペレーティング・システムによって様々です。 以下の例は、[OpenSSL コマンド・ライン・ツール ![外部リンク・アイコン](../icons/launch-glyph.svg "外部リンク・アイコン")](http://www.openssl.org/){:new_window}を使用して CSR を作成する方法を示しています。

```
openssl req -out CSR.csr -new -newkey rsa:2048 -nodes -keyout privatekey.key
```
{: codeblock}

OpenSSL SHA-512 が実装されるかどうかは、コンパイラーが 64 ビットの整数型をサポートしているかどうかで決まります。 SHA-256 の証明書に関して互換性の問題があるアプリケーションでは、SHA-1 オプションを使用してかまいません。
{: tip}

証明書は認証局によって発行され、その認証局によってデジタル署名されています。 CSR の作成後は、パブリック認証局に SSL 証明書を生成できます。

### 必要な CSR の内容

CSR を有効にするには、CSR の作成時に以下の情報を入力する必要があります。

<dl>
<dt>国の名前</dt>
<dd>国または地域の 2 桁のコード。 例えば、`US` は米国の国別コードです。 他の国や地域については、CSR を作成する前に、[ISO 国別コードのリスト ![外部リンク・アイコン](../icons/launch-glyph.svg "外部リンク・アイコン")](https://www.iso.org/obp/ui/#search)を調べてください。</dd>
<dt>都道府県</dt>
<dd>短縮されていない正式な都道府県の名称。</dd>
<dt>地域</dt>
<dd>市区町村の正式名称。</dd>
<dt>組織</dt>
<dd>その地域で法的に登録された法人もしくは企業の正式名称または個人名。 企業の場合は、必ず組織形態名 (Ltd.、Inc.、NV. など) を含めてください。</dd>
<dt>部門</dt>
<dd>証明書を申請している会社の (経理や営業などの) 部門名。</dd>
<dt>共通名</dt>
<dd>SSL 証明書の要求先サイトの完全修飾ドメイン名 (FQDN)。</dd>
</dl>

## SSL 証明書のアップロード
{: #ssl_certificate}

セキュリティー・プロトコルを適用して、アプリケーションの通信におけるプライバシーを提供することで、盗聴、不正アクセス、およびメッセージ偽造を防止することができます。アカウント所有者が無料のライト・アカウントを持っている場合、証明書をアップロードするにはアカウントをアップグレードする必要があります。

カスタム・ドメインを使用して SSL 証明書を提供する場合、以下の地域エンドポイントを使用して、{{site.data.keyword.cloud_notm}} の組織の URL 経路を指定します。

* US-South - `custom-domain.us-south.cf.cloud.ibm.com`
* US-East - `custom-domain.us-east.cf.cloud.ibm.com`
* EU-DE - `custom-domain.eu-de.cf.cloud.ibm.com`
* EU-GB - `custom-domain.eu-gb.cf.cloud.ibm.com`
* AU-SYD - `custom-domain.au-syd.cf.cloud.ibm.com`

アプリケーションの証明書をアップロードするには、以下のステップを実行します。

1. {{site.data.keyword.cloud_notm}} コンソールのリソース・リストに移動します。

2. アプリを選択して、アプリの詳細を表示します。

3. **「経路」** > **「ドメインの管理」**をクリックします。

4. 「アクション」列で、「アクション」アイコン ![「その他のアクション」アイコン](../icons/action-menu-icon.svg) > **「ドメイン」**をクリックします。

5. 「SSL 証明書」列で**「アップロード」**をクリックして、カスタム・ドメインを選択します。
  
  * 証明書: 公開鍵を証明書所有者の ID にバインドして証明書の所有者を認証できるようにするデジタル文書。証明書は認証局によって発行され、その認証局によってデジタル署名されています。 証明書は通常、認証局によって発行および署名されます。 ただし、テストおよび開発目的では、自己署名証明書を使用することができます。
  * 秘密鍵: 対応する公開鍵のみが復号できるメッセージを暗号化するために使用される算法パターン。秘密鍵は、対応する公開鍵によって暗号化されたメッセージの暗号化解除にも使用されます。 秘密鍵はユーザーのシステム上に保持され、パスワードによって保護されています。
  * 中間証明書 (オプション): 特にエンド・エンティティー・サーバー証明書を発行する目的で、トラステッド・ルート認証局 (CA) によって発行される、従属証明書。その結果として、トラステッド・ルート CA から始まり、中間証明書を経て、組織に発行される SSL 証明書に至る、証明書チェーンが形成されます。 中間証明書を使用して、メイン証明書の認証性を検証します。 中間証明書は通常、信頼のおける第三者機関から取得します。 アプリケーションを実動環境にデプロイする前にテストする際には、中間証明書が不要な場合もあります。
  * クライアント証明書の要求の有効化: このオプションを有効にすると、SSL で保護されたドメインにアクセスしようとするユーザーは、クライアント側の証明書を提供するよう要求されます。例えば、Web ブラウザーでユーザーが SSL で保護されたドメインにアクセスしようとすると、Web ブラウザーは、そのドメインのクライアント証明書を提供するようユーザーにプロンプトを出します。 

    {{site.data.keyword.cloud_notm}} ドメイン管理のカスタム証明書機能は、トランスポート層セキュリティー (TLS) プロトコルのサーバー名表示 (SNI) 拡張機能に依存します。 カスタム証明書で保護されている {{site.data.keyword.cloud_notm}} アプリケーションにアクセスするクライアント・コードは、TLS 実装の SNI 拡張機能をサポートする必要があります。 詳細については、[RFC 4346 のセクション 7.4.2 ![外部リンク・アイコン](../icons/launch-glyph.svg "外部リンク・アイコン")](http://tools.ietf.org/html/rfc4346#section-7.4.2){:new_window} および『[TLS を使用したデータの保護 (Securing data with TLS)](/docs/get-support/appsectls.html)』を参照してください。
    {: note}
  
  * クライアント証明書トラストストア (オプション): アプリケーションへのアクセスが許可されるユーザー用のクライアント証明書が含まれています。クライアント証明書を要求するオプションを有効にするには、クライアント証明書トラストストア・ファイルをアップロードします。
  
    メタデータに公開鍵を含んでいるクライアント証明書トラストストアをアップロードすることで、相互認証をセットアップできます。
    {: tip}

詳しくは、『[SSL 証明書のインポート](/docs/infrastructure/ssl-certificates/import-ssl-certificate.html#import-an-ssl-certificate)』を参照してください。


